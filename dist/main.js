(()=>{"use strict";var t={887:(t,e,n)=>{n.r(e),n.d(e,{glMatrix:()=>r,mat2:()=>a,mat2d:()=>i,mat3:()=>o,mat4:()=>s,quat:()=>h,quat2:()=>f,vec2:()=>l,vec3:()=>u,vec4:()=>c});var r={};n.r(r),n.d(r,{ARRAY_TYPE:()=>M,EPSILON:()=>d,RANDOM:()=>v,equals:()=>g,setMatrixArrayType:()=>m,toRadian:()=>b});var a={};n.r(a),n.d(a,{LDU:()=>D,add:()=>E,adjoint:()=>A,clone:()=>x,copy:()=>_,create:()=>y,determinant:()=>U,equals:()=>z,exactEquals:()=>k,frob:()=>G,fromRotation:()=>B,fromScaling:()=>L,fromValues:()=>S,identity:()=>w,invert:()=>q,mul:()=>j,multiply:()=>T,multiplyScalar:()=>V,multiplyScalarAndAdd:()=>N,rotate:()=>I,scale:()=>R,set:()=>C,str:()=>O,sub:()=>H,subtract:()=>F,transpose:()=>P});var i={};n.r(i),n.d(i,{add:()=>ct,clone:()=>Q,copy:()=>X,create:()=>Y,determinant:()=>$,equals:()=>Mt,exactEquals:()=>dt,frob:()=>ut,fromRotation:()=>at,fromScaling:()=>it,fromTranslation:()=>ot,fromValues:()=>W,identity:()=>Z,invert:()=>K,mul:()=>vt,multiply:()=>tt,multiplyScalar:()=>ft,multiplyScalarAndAdd:()=>lt,rotate:()=>et,scale:()=>nt,set:()=>J,str:()=>st,sub:()=>mt,subtract:()=>ht,translate:()=>rt});var o={};n.r(o),n.d(o,{add:()=>zt,adjoint:()=>Pt,clone:()=>gt,copy:()=>yt,create:()=>pt,determinant:()=>qt,equals:()=>Yt,exactEquals:()=>Ht,frob:()=>kt,fromMat2d:()=>Ot,fromMat4:()=>bt,fromQuat:()=>Gt,fromRotation:()=>Bt,fromScaling:()=>Lt,fromTranslation:()=>Rt,fromValues:()=>xt,identity:()=>wt,invert:()=>Ct,mul:()=>Qt,multiply:()=>At,multiplyScalar:()=>Nt,multiplyScalarAndAdd:()=>jt,normalFromMat4:()=>Dt,projection:()=>Et,rotate:()=>Tt,scale:()=>It,set:()=>_t,str:()=>Ft,sub:()=>Xt,subtract:()=>Vt,translate:()=>Ut,transpose:()=>St});var s={};n.r(s),n.d(s,{add:()=>Ee,adjoint:()=>re,clone:()=>Wt,copy:()=>Jt,create:()=>Zt,determinant:()=>ae,equals:()=>Ne,exactEquals:()=>Ve,frob:()=>De,fromQuat:()=>Ce,fromQuat2:()=>ge,fromRotation:()=>Me,fromRotationTranslation:()=>be,fromRotationTranslationScale:()=>we,fromRotationTranslationScaleOrigin:()=>Se,fromScaling:()=>de,fromTranslation:()=>le,fromValues:()=>Kt,fromXRotation:()=>ve,fromYRotation:()=>me,fromZRotation:()=>pe,frustum:()=>Pe,getRotation:()=>_e,getScaling:()=>xe,getTranslation:()=>ye,identity:()=>te,invert:()=>ne,lookAt:()=>Le,mul:()=>je,multiply:()=>ie,multiplyScalar:()=>ke,multiplyScalarAndAdd:()=>ze,ortho:()=>Re,orthoNO:()=>Ie,orthoZO:()=>Be,perspective:()=>Ae,perspectiveFromFieldOfView:()=>Te,perspectiveNO:()=>qe,perspectiveZO:()=>Ue,rotate:()=>ue,rotateX:()=>ce,rotateY:()=>he,rotateZ:()=>fe,scale:()=>se,set:()=>$t,str:()=>Ge,sub:()=>He,subtract:()=>Fe,targetTo:()=>Oe,translate:()=>oe,transpose:()=>ee});var u={};n.r(u),n.d(u,{add:()=>Ke,angle:()=>An,bezier:()=>yn,ceil:()=>nn,clone:()=>Qe,copy:()=>We,create:()=>Ye,cross:()=>pn,dist:()=>Dn,distance:()=>hn,div:()=>Gn,divide:()=>en,dot:()=>mn,equals:()=>Rn,exactEquals:()=>In,floor:()=>rn,forEach:()=>zn,fromValues:()=>Ze,hermite:()=>gn,inverse:()=>Mn,len:()=>Fn,length:()=>Xe,lerp:()=>bn,max:()=>on,min:()=>an,mul:()=>On,multiply:()=>tn,negate:()=>dn,normalize:()=>vn,random:()=>xn,rotateX:()=>Cn,rotateY:()=>Pn,rotateZ:()=>qn,round:()=>sn,scale:()=>un,scaleAndAdd:()=>cn,set:()=>Je,sqrDist:()=>En,sqrLen:()=>kn,squaredDistance:()=>fn,squaredLength:()=>ln,str:()=>Tn,sub:()=>Ln,subtract:()=>$e,transformMat3:()=>wn,transformMat4:()=>_n,transformQuat:()=>Sn,zero:()=>Un});var c={};n.r(c),n.d(c,{add:()=>Qn,ceil:()=>Jn,clone:()=>Nn,copy:()=>Hn,create:()=>Vn,cross:()=>lr,dist:()=>Sr,distance:()=>ar,div:()=>wr,divide:()=>Wn,dot:()=>fr,equals:()=>yr,exactEquals:()=>gr,floor:()=>Kn,forEach:()=>Ar,fromValues:()=>jn,inverse:()=>cr,len:()=>Pr,length:()=>or,lerp:()=>dr,max:()=>tr,min:()=>$n,mul:()=>_r,multiply:()=>Zn,negate:()=>ur,normalize:()=>hr,random:()=>Mr,round:()=>er,scale:()=>nr,scaleAndAdd:()=>rr,set:()=>Yn,sqrDist:()=>Cr,sqrLen:()=>qr,squaredDistance:()=>ir,squaredLength:()=>sr,str:()=>br,sub:()=>xr,subtract:()=>Xn,transformMat4:()=>vr,transformQuat:()=>mr,zero:()=>pr});var h={};n.r(h),n.d(h,{add:()=>ia,calculateW:()=>Er,clone:()=>ea,conjugate:()=>Hr,copy:()=>ra,create:()=>Ur,dot:()=>ua,equals:()=>ma,exactEquals:()=>va,exp:()=>Fr,fromEuler:()=>Qr,fromMat3:()=>Yr,fromValues:()=>na,getAngle:()=>Br,getAxisAngle:()=>Rr,identity:()=>Tr,invert:()=>jr,len:()=>fa,length:()=>ha,lerp:()=>ca,ln:()=>kr,mul:()=>oa,multiply:()=>Lr,normalize:()=>Ma,pow:()=>zr,random:()=>Nr,rotateX:()=>Or,rotateY:()=>Gr,rotateZ:()=>Dr,rotationTo:()=>pa,scale:()=>sa,set:()=>aa,setAxes:()=>ga,setAxisAngle:()=>Ir,slerp:()=>Vr,sqlerp:()=>ba,sqrLen:()=>da,squaredLength:()=>la,str:()=>Xr});var f={};n.r(f),n.d(f,{add:()=>Na,clone:()=>xa,conjugate:()=>Wa,copy:()=>Aa,create:()=>ya,dot:()=>Qa,equals:()=>ai,exactEquals:()=>ri,fromMat4:()=>qa,fromRotation:()=>Pa,fromRotationTranslation:()=>Sa,fromRotationTranslationValues:()=>wa,fromTranslation:()=>Ca,fromValues:()=>_a,getDual:()=>Ra,getReal:()=>Ia,getTranslation:()=>Oa,identity:()=>Ua,invert:()=>Za,len:()=>Ka,length:()=>Ja,lerp:()=>Xa,mul:()=>Ha,multiply:()=>ja,normalize:()=>ei,rotateAroundAxis:()=>Va,rotateByQuatAppend:()=>ka,rotateByQuatPrepend:()=>za,rotateX:()=>Da,rotateY:()=>Ea,rotateZ:()=>Fa,scale:()=>Ya,set:()=>Ta,setDual:()=>La,setReal:()=>Ba,sqrLen:()=>ti,squaredLength:()=>$a,str:()=>ni,translate:()=>Ga});var l={};n.r(l),n.d(l,{add:()=>hi,angle:()=>Di,ceil:()=>Mi,clone:()=>oi,copy:()=>ui,create:()=>ii,cross:()=>Ui,dist:()=>Yi,distance:()=>xi,div:()=>Hi,divide:()=>di,dot:()=>Ai,equals:()=>zi,exactEquals:()=>ki,floor:()=>vi,forEach:()=>Zi,fromValues:()=>si,inverse:()=>Pi,len:()=>Vi,length:()=>wi,lerp:()=>Ti,max:()=>pi,min:()=>mi,mul:()=>ji,multiply:()=>li,negate:()=>Ci,normalize:()=>qi,random:()=>Ii,rotate:()=>Gi,round:()=>bi,scale:()=>gi,scaleAndAdd:()=>yi,set:()=>ci,sqrDist:()=>Qi,sqrLen:()=>Xi,squaredDistance:()=>_i,squaredLength:()=>Si,str:()=>Fi,sub:()=>Ni,subtract:()=>fi,transformMat2:()=>Ri,transformMat2d:()=>Bi,transformMat3:()=>Li,transformMat4:()=>Oi,zero:()=>Ei});var d=1e-6,M="undefined"!=typeof Float32Array?Float32Array:Array,v=Math.random;function m(t){M=t}var p=Math.PI/180;function b(t){return t*p}function g(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function y(){var t=new M(4);return M!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function x(t){var e=new M(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function _(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function w(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function S(t,e,n,r){var a=new M(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function C(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function P(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function q(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n*i-a*r;return o?(o=1/o,t[0]=i*o,t[1]=-r*o,t[2]=-a*o,t[3]=n*o,t):null}function A(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function U(t){return t[0]*t[3]-t[2]*t[1]}function T(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],u=n[1],c=n[2],h=n[3];return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=r*c+i*h,t[3]=a*c+o*h,t}function I(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=a*u+o*s,t[2]=r*-s+i*u,t[3]=a*-s+o*u,t}function R(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=a*s,t[2]=i*u,t[3]=o*u,t}function B(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function L(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function O(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function G(t){return Math.hypot(t[0],t[1],t[2],t[3])}function D(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function E(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function F(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function k(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function z(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-u)<=d*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-c)<=d*Math.max(1,Math.abs(i),Math.abs(c))}function V(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function N(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var j=T,H=F;function Y(){var t=new M(6);return M!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function Q(t){var e=new M(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function X(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Z(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function W(t,e,n,r,a,i){var o=new M(6);return o[0]=t,o[1]=e,o[2]=n,o[3]=r,o[4]=a,o[5]=i,o}function J(t,e,n,r,a,i,o){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t}function K(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=n*i-r*a;return u?(u=1/u,t[0]=i*u,t[1]=-r*u,t[2]=-a*u,t[3]=n*u,t[4]=(a*s-i*o)*u,t[5]=(r*o-n*s)*u,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=n[0],h=n[1],f=n[2],l=n[3],d=n[4],M=n[5];return t[0]=r*c+i*h,t[1]=a*c+o*h,t[2]=r*f+i*l,t[3]=a*f+o*l,t[4]=r*d+i*M+s,t[5]=a*d+o*M+u,t}function et(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=Math.sin(n),h=Math.cos(n);return t[0]=r*h+i*c,t[1]=a*h+o*c,t[2]=r*-c+i*h,t[3]=a*-c+o*h,t[4]=s,t[5]=u,t}function nt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=n[0],h=n[1];return t[0]=r*c,t[1]=a*c,t[2]=i*h,t[3]=o*h,t[4]=s,t[5]=u,t}function rt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=n[0],h=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=r*c+i*h+s,t[5]=a*c+o*h+u,t}function at(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function it(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function ht(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function ft(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function lt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function Mt(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=e[0],c=e[1],h=e[2],f=e[3],l=e[4],M=e[5];return Math.abs(n-u)<=d*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-h)<=d*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(i-f)<=d*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-l)<=d*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(s-M)<=d*Math.max(1,Math.abs(s),Math.abs(M))}var vt=tt,mt=ht;function pt(){var t=new M(9);return M!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function bt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gt(t){var e=new M(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function yt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function xt(t,e,n,r,a,i,o,s,u){var c=new M(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=a,c[5]=i,c[6]=o,c[7]=s,c[8]=u,c}function _t(t,e,n,r,a,i,o,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t}function wt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function St(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Ct(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=h*o-s*c,l=-h*i+s*u,d=c*i-o*u,M=n*f+r*l+a*d;return M?(M=1/M,t[0]=f*M,t[1]=(-h*r+a*c)*M,t[2]=(s*r-a*o)*M,t[3]=l*M,t[4]=(h*n-a*u)*M,t[5]=(-s*n+a*i)*M,t[6]=d*M,t[7]=(-c*n+r*u)*M,t[8]=(o*n-r*i)*M,t):null}function Pt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8];return t[0]=o*h-s*c,t[1]=a*c-r*h,t[2]=r*s-a*o,t[3]=s*u-i*h,t[4]=n*h-a*u,t[5]=a*i-n*s,t[6]=i*c-o*u,t[7]=r*u-n*c,t[8]=n*o-r*i,t}function qt(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*(c*i-o*u)+n*(-c*a+o*s)+r*(u*a-i*s)}function At(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=n[0],d=n[1],M=n[2],v=n[3],m=n[4],p=n[5],b=n[6],g=n[7],y=n[8];return t[0]=l*r+d*o+M*c,t[1]=l*a+d*s+M*h,t[2]=l*i+d*u+M*f,t[3]=v*r+m*o+p*c,t[4]=v*a+m*s+p*h,t[5]=v*i+m*u+p*f,t[6]=b*r+g*o+y*c,t[7]=b*a+g*s+y*h,t[8]=b*i+g*u+y*f,t}function Ut(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=n[0],d=n[1];return t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=l*r+d*o+c,t[7]=l*a+d*s+h,t[8]=l*i+d*u+f,t}function Tt(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=Math.sin(n),d=Math.cos(n);return t[0]=d*r+l*o,t[1]=d*a+l*s,t[2]=d*i+l*u,t[3]=d*o-l*r,t[4]=d*s-l*a,t[5]=d*u-l*i,t[6]=c,t[7]=h,t[8]=f,t}function It(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Rt(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Bt(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Lt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Gt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n+n,s=r+r,u=a+a,c=n*o,h=r*o,f=r*s,l=a*o,d=a*s,M=a*u,v=i*o,m=i*s,p=i*u;return t[0]=1-f-M,t[3]=h-p,t[6]=l+m,t[1]=h+p,t[4]=1-c-M,t[7]=d-v,t[2]=l-m,t[5]=d+v,t[8]=1-c-f,t}function Dt(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],d=e[11],M=e[12],v=e[13],m=e[14],p=e[15],b=n*s-r*o,g=n*u-a*o,y=n*c-i*o,x=r*u-a*s,_=r*c-i*s,w=a*c-i*u,S=h*v-f*M,C=h*m-l*M,P=h*p-d*M,q=f*m-l*v,A=f*p-d*v,U=l*p-d*m,T=b*U-g*A+y*q+x*P-_*C+w*S;return T?(T=1/T,t[0]=(s*U-u*A+c*q)*T,t[1]=(u*P-o*U-c*C)*T,t[2]=(o*A-s*P+c*S)*T,t[3]=(a*A-r*U-i*q)*T,t[4]=(n*U-a*P+i*C)*T,t[5]=(r*P-n*A-i*S)*T,t[6]=(v*w-m*_+p*x)*T,t[7]=(m*y-M*w-p*g)*T,t[8]=(M*_-v*y+p*b)*T,t):null}function Et(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Ft(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function kt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function zt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function Vt(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function Nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function jt(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function Ht(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function Yt(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],h=t[8],f=e[0],l=e[1],M=e[2],v=e[3],m=e[4],p=e[5],b=e[6],g=e[7],y=e[8];return Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-l)<=d*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-M)<=d*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-v)<=d*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(o-m)<=d*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-p)<=d*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-b)<=d*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(c-g)<=d*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(h-y)<=d*Math.max(1,Math.abs(h),Math.abs(y))}var Qt=At,Xt=Vt;function Zt(){var t=new M(16);return M!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Wt(t){var e=new M(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Jt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Kt(t,e,n,r,a,i,o,s,u,c,h,f,l,d,v,m){var p=new M(16);return p[0]=t,p[1]=e,p[2]=n,p[3]=r,p[4]=a,p[5]=i,p[6]=o,p[7]=s,p[8]=u,p[9]=c,p[10]=h,p[11]=f,p[12]=l,p[13]=d,p[14]=v,p[15]=m,p}function $t(t,e,n,r,a,i,o,s,u,c,h,f,l,d,M,v,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t[9]=h,t[10]=f,t[11]=l,t[12]=d,t[13]=M,t[14]=v,t[15]=m,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],i=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],d=e[11],M=e[12],v=e[13],m=e[14],p=e[15],b=n*s-r*o,g=n*u-a*o,y=n*c-i*o,x=r*u-a*s,_=r*c-i*s,w=a*c-i*u,S=h*v-f*M,C=h*m-l*M,P=h*p-d*M,q=f*m-l*v,A=f*p-d*v,U=l*p-d*m,T=b*U-g*A+y*q+x*P-_*C+w*S;return T?(T=1/T,t[0]=(s*U-u*A+c*q)*T,t[1]=(a*A-r*U-i*q)*T,t[2]=(v*w-m*_+p*x)*T,t[3]=(l*_-f*w-d*x)*T,t[4]=(u*P-o*U-c*C)*T,t[5]=(n*U-a*P+i*C)*T,t[6]=(m*y-M*w-p*g)*T,t[7]=(h*w-l*y+d*g)*T,t[8]=(o*A-s*P+c*S)*T,t[9]=(r*P-n*A-i*S)*T,t[10]=(M*_-v*y+p*b)*T,t[11]=(f*y-h*_-d*b)*T,t[12]=(s*C-o*q-u*S)*T,t[13]=(n*q-r*C+a*S)*T,t[14]=(v*g-M*x-m*b)*T,t[15]=(h*x-f*g+l*b)*T,t):null}function re(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],d=e[11],M=e[12],v=e[13],m=e[14],p=e[15];return t[0]=s*(l*p-d*m)-f*(u*p-c*m)+v*(u*d-c*l),t[1]=-(r*(l*p-d*m)-f*(a*p-i*m)+v*(a*d-i*l)),t[2]=r*(u*p-c*m)-s*(a*p-i*m)+v*(a*c-i*u),t[3]=-(r*(u*d-c*l)-s*(a*d-i*l)+f*(a*c-i*u)),t[4]=-(o*(l*p-d*m)-h*(u*p-c*m)+M*(u*d-c*l)),t[5]=n*(l*p-d*m)-h*(a*p-i*m)+M*(a*d-i*l),t[6]=-(n*(u*p-c*m)-o*(a*p-i*m)+M*(a*c-i*u)),t[7]=n*(u*d-c*l)-o*(a*d-i*l)+h*(a*c-i*u),t[8]=o*(f*p-d*v)-h*(s*p-c*v)+M*(s*d-c*f),t[9]=-(n*(f*p-d*v)-h*(r*p-i*v)+M*(r*d-i*f)),t[10]=n*(s*p-c*v)-o*(r*p-i*v)+M*(r*c-i*s),t[11]=-(n*(s*d-c*f)-o*(r*d-i*f)+h*(r*c-i*s)),t[12]=-(o*(f*m-l*v)-h*(s*m-u*v)+M*(s*l-u*f)),t[13]=n*(f*m-l*v)-h*(r*m-a*v)+M*(r*l-a*f),t[14]=-(n*(s*m-u*v)-o*(r*m-a*v)+M*(r*u-a*s)),t[15]=n*(s*l-u*f)-o*(r*l-a*f)+h*(r*u-a*s),t}function ae(t){var e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],c=t[8],h=t[9],f=t[10],l=t[11],d=t[12],M=t[13],v=t[14],m=t[15];return(e*o-n*i)*(f*m-l*v)-(e*s-r*i)*(h*m-l*M)+(e*u-a*i)*(h*v-f*M)+(n*s-r*o)*(c*m-l*d)-(n*u-a*o)*(c*v-f*d)+(r*u-a*s)*(c*M-h*d)}function ie(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=e[9],d=e[10],M=e[11],v=e[12],m=e[13],p=e[14],b=e[15],g=n[0],y=n[1],x=n[2],_=n[3];return t[0]=g*r+y*s+x*f+_*v,t[1]=g*a+y*u+x*l+_*m,t[2]=g*i+y*c+x*d+_*p,t[3]=g*o+y*h+x*M+_*b,g=n[4],y=n[5],x=n[6],_=n[7],t[4]=g*r+y*s+x*f+_*v,t[5]=g*a+y*u+x*l+_*m,t[6]=g*i+y*c+x*d+_*p,t[7]=g*o+y*h+x*M+_*b,g=n[8],y=n[9],x=n[10],_=n[11],t[8]=g*r+y*s+x*f+_*v,t[9]=g*a+y*u+x*l+_*m,t[10]=g*i+y*c+x*d+_*p,t[11]=g*o+y*h+x*M+_*b,g=n[12],y=n[13],x=n[14],_=n[15],t[12]=g*r+y*s+x*f+_*v,t[13]=g*a+y*u+x*l+_*m,t[14]=g*i+y*c+x*d+_*p,t[15]=g*o+y*h+x*M+_*b,t}function oe(t,e,n){var r,a,i,o,s,u,c,h,f,l,d,M,v=n[0],m=n[1],p=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*p+e[12],t[13]=e[1]*v+e[5]*m+e[9]*p+e[13],t[14]=e[2]*v+e[6]*m+e[10]*p+e[14],t[15]=e[3]*v+e[7]*m+e[11]*p+e[15]):(r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=e[9],d=e[10],M=e[11],t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=h,t[8]=f,t[9]=l,t[10]=d,t[11]=M,t[12]=r*v+s*m+f*p+e[12],t[13]=a*v+u*m+l*p+e[13],t[14]=i*v+c*m+d*p+e[14],t[15]=o*v+h*m+M*p+e[15]),t}function se(t,e,n){var r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,n,r){var a,i,o,s,u,c,h,f,l,M,v,m,p,b,g,y,x,_,w,S,C,P,q,A,U=r[0],T=r[1],I=r[2],R=Math.hypot(U,T,I);return R<d?null:(U*=R=1/R,T*=R,I*=R,a=Math.sin(n),o=1-(i=Math.cos(n)),s=e[0],u=e[1],c=e[2],h=e[3],f=e[4],l=e[5],M=e[6],v=e[7],m=e[8],p=e[9],b=e[10],g=e[11],y=U*U*o+i,x=T*U*o+I*a,_=I*U*o-T*a,w=U*T*o-I*a,S=T*T*o+i,C=I*T*o+U*a,P=U*I*o+T*a,q=T*I*o-U*a,A=I*I*o+i,t[0]=s*y+f*x+m*_,t[1]=u*y+l*x+p*_,t[2]=c*y+M*x+b*_,t[3]=h*y+v*x+g*_,t[4]=s*w+f*S+m*C,t[5]=u*w+l*S+p*C,t[6]=c*w+M*S+b*C,t[7]=h*w+v*S+g*C,t[8]=s*P+f*q+m*A,t[9]=u*P+l*q+p*A,t[10]=c*P+M*q+b*A,t[11]=h*P+v*q+g*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[4],o=e[5],s=e[6],u=e[7],c=e[8],h=e[9],f=e[10],l=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+c*r,t[5]=o*a+h*r,t[6]=s*a+f*r,t[7]=u*a+l*r,t[8]=c*a-i*r,t[9]=h*a-o*r,t[10]=f*a-s*r,t[11]=l*a-u*r,t}function he(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],u=e[3],c=e[8],h=e[9],f=e[10],l=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-c*r,t[1]=o*a-h*r,t[2]=s*a-f*r,t[3]=u*a-l*r,t[8]=i*r+c*a,t[9]=o*r+h*a,t[10]=s*r+f*a,t[11]=u*r+l*a,t}function fe(t,e,n){var r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],u=e[3],c=e[4],h=e[5],f=e[6],l=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+c*r,t[1]=o*a+h*r,t[2]=s*a+f*r,t[3]=u*a+l*r,t[4]=c*a-i*r,t[5]=h*a-o*r,t[6]=f*a-s*r,t[7]=l*a-u*r,t}function le(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Me(t,e,n){var r,a,i,o=n[0],s=n[1],u=n[2],c=Math.hypot(o,s,u);return c<d?null:(o*=c=1/c,s*=c,u*=c,r=Math.sin(e),i=1-(a=Math.cos(e)),t[0]=o*o*i+a,t[1]=s*o*i+u*r,t[2]=u*o*i-s*r,t[3]=0,t[4]=o*s*i-u*r,t[5]=s*s*i+a,t[6]=u*s*i+o*r,t[7]=0,t[8]=o*u*i+s*r,t[9]=s*u*i-o*r,t[10]=u*u*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function ve(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function be(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=r+r,u=a+a,c=i+i,h=r*s,f=r*u,l=r*c,d=a*u,M=a*c,v=i*c,m=o*s,p=o*u,b=o*c;return t[0]=1-(d+v),t[1]=f+b,t[2]=l-p,t[3]=0,t[4]=f-b,t[5]=1-(h+v),t[6]=M+m,t[7]=0,t[8]=l+p,t[9]=M-m,t[10]=1-(h+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function ge(t,e){var n=new M(3),r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=r*r+a*a+i*i+o*o;return f>0?(n[0]=2*(s*o+h*r+u*i-c*a)/f,n[1]=2*(u*o+h*a+c*r-s*i)/f,n[2]=2*(c*o+h*i+s*a-u*r)/f):(n[0]=2*(s*o+h*r+u*i-c*a),n[1]=2*(u*o+h*a+c*r-s*i),n[2]=2*(c*o+h*i+s*a-u*r)),be(t,e,n),t}function ye(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function xe(t,e){var n=e[0],r=e[1],a=e[2],i=e[4],o=e[5],s=e[6],u=e[8],c=e[9],h=e[10];return t[0]=Math.hypot(n,r,a),t[1]=Math.hypot(i,o,s),t[2]=Math.hypot(u,c,h),t}function _e(t,e){var n=new M(3);xe(n,e);var r=1/n[0],a=1/n[1],i=1/n[2],o=e[0]*r,s=e[1]*a,u=e[2]*i,c=e[4]*r,h=e[5]*a,f=e[6]*i,l=e[8]*r,d=e[9]*a,v=e[10]*i,m=o+h+v,p=0;return m>0?(p=2*Math.sqrt(m+1),t[3]=.25*p,t[0]=(f-d)/p,t[1]=(l-u)/p,t[2]=(s-c)/p):o>h&&o>v?(p=2*Math.sqrt(1+o-h-v),t[3]=(f-d)/p,t[0]=.25*p,t[1]=(s+c)/p,t[2]=(l+u)/p):h>v?(p=2*Math.sqrt(1+h-o-v),t[3]=(l-u)/p,t[0]=(s+c)/p,t[1]=.25*p,t[2]=(f+d)/p):(p=2*Math.sqrt(1+v-o-h),t[3]=(s-c)/p,t[0]=(l+u)/p,t[1]=(f+d)/p,t[2]=.25*p),t}function we(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=e[3],u=a+a,c=i+i,h=o+o,f=a*u,l=a*c,d=a*h,M=i*c,v=i*h,m=o*h,p=s*u,b=s*c,g=s*h,y=r[0],x=r[1],_=r[2];return t[0]=(1-(M+m))*y,t[1]=(l+g)*y,t[2]=(d-b)*y,t[3]=0,t[4]=(l-g)*x,t[5]=(1-(f+m))*x,t[6]=(v+p)*x,t[7]=0,t[8]=(d+b)*_,t[9]=(v-p)*_,t[10]=(1-(f+M))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Se(t,e,n,r,a){var i=e[0],o=e[1],s=e[2],u=e[3],c=i+i,h=o+o,f=s+s,l=i*c,d=i*h,M=i*f,v=o*h,m=o*f,p=s*f,b=u*c,g=u*h,y=u*f,x=r[0],_=r[1],w=r[2],S=a[0],C=a[1],P=a[2],q=(1-(v+p))*x,A=(d+y)*x,U=(M-g)*x,T=(d-y)*_,I=(1-(l+p))*_,R=(m+b)*_,B=(M+g)*w,L=(m-b)*w,O=(1-(l+v))*w;return t[0]=q,t[1]=A,t[2]=U,t[3]=0,t[4]=T,t[5]=I,t[6]=R,t[7]=0,t[8]=B,t[9]=L,t[10]=O,t[11]=0,t[12]=n[0]+S-(q*S+T*C+B*P),t[13]=n[1]+C-(A*S+I*C+L*P),t[14]=n[2]+P-(U*S+R*C+O*P),t[15]=1,t}function Ce(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n+n,s=r+r,u=a+a,c=n*o,h=r*o,f=r*s,l=a*o,d=a*s,M=a*u,v=i*o,m=i*s,p=i*u;return t[0]=1-f-M,t[1]=h+p,t[2]=l-m,t[3]=0,t[4]=h-p,t[5]=1-c-M,t[6]=d+v,t[7]=0,t[8]=l+m,t[9]=d-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Pe(t,e,n,r,a,i,o){var s=1/(n-e),u=1/(a-r),c=1/(i-o);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(a+r)*u,t[10]=(o+i)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*c,t[15]=0,t}function qe(t,e,n,r,a){var i,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(r-a),t[10]=(a+r)*i,t[14]=2*a*r*i):(t[10]=-1,t[14]=-2*r),t}var Ae=qe;function Ue(t,e,n,r,a){var i,o=1/Math.tan(e/2);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0?(i=1/(r-a),t[10]=a*i,t[14]=a*r*i):(t[10]=-1,t[14]=-r),t}function Te(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(a+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(a-i)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function Ie(t,e,n,r,a,i,o){var s=1/(e-n),u=1/(r-a),c=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(a+r)*u,t[14]=(o+i)*c,t[15]=1,t}var Re=Ie;function Be(t,e,n,r,a,i,o){var s=1/(e-n),u=1/(r-a),c=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(a+r)*u,t[14]=i*c,t[15]=1,t}function Le(t,e,n,r){var a,i,o,s,u,c,h,f,l,M,v=e[0],m=e[1],p=e[2],b=r[0],g=r[1],y=r[2],x=n[0],_=n[1],w=n[2];return Math.abs(v-x)<d&&Math.abs(m-_)<d&&Math.abs(p-w)<d?te(t):(h=v-x,f=m-_,l=p-w,a=g*(l*=M=1/Math.hypot(h,f,l))-y*(f*=M),i=y*(h*=M)-b*l,o=b*f-g*h,(M=Math.hypot(a,i,o))?(a*=M=1/M,i*=M,o*=M):(a=0,i=0,o=0),s=f*o-l*i,u=l*a-h*o,c=h*i-f*a,(M=Math.hypot(s,u,c))?(s*=M=1/M,u*=M,c*=M):(s=0,u=0,c=0),t[0]=a,t[1]=s,t[2]=h,t[3]=0,t[4]=i,t[5]=u,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=l,t[11]=0,t[12]=-(a*v+i*m+o*p),t[13]=-(s*v+u*m+c*p),t[14]=-(h*v+f*m+l*p),t[15]=1,t)}function Oe(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=r[0],u=r[1],c=r[2],h=a-n[0],f=i-n[1],l=o-n[2],d=h*h+f*f+l*l;d>0&&(h*=d=1/Math.sqrt(d),f*=d,l*=d);var M=u*l-c*f,v=c*h-s*l,m=s*f-u*h;return(d=M*M+v*v+m*m)>0&&(M*=d=1/Math.sqrt(d),v*=d,m*=d),t[0]=M,t[1]=v,t[2]=m,t[3]=0,t[4]=f*m-l*v,t[5]=l*M-h*m,t[6]=h*v-f*M,t[7]=0,t[8]=h,t[9]=f,t[10]=l,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t}function Ge(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function De(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Ee(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Fe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function ke(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function ze(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function Ve(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ne(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],h=t[8],f=t[9],l=t[10],M=t[11],v=t[12],m=t[13],p=t[14],b=t[15],g=e[0],y=e[1],x=e[2],_=e[3],w=e[4],S=e[5],C=e[6],P=e[7],q=e[8],A=e[9],U=e[10],T=e[11],I=e[12],R=e[13],B=e[14],L=e[15];return Math.abs(n-g)<=d*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-y)<=d*Math.max(1,Math.abs(r),Math.abs(y))&&Math.abs(a-x)<=d*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(i-_)<=d*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(o-w)<=d*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-S)<=d*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-C)<=d*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(c-P)<=d*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(h-q)<=d*Math.max(1,Math.abs(h),Math.abs(q))&&Math.abs(f-A)<=d*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(l-U)<=d*Math.max(1,Math.abs(l),Math.abs(U))&&Math.abs(M-T)<=d*Math.max(1,Math.abs(M),Math.abs(T))&&Math.abs(v-I)<=d*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(m-R)<=d*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(p-B)<=d*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(b-L)<=d*Math.max(1,Math.abs(b),Math.abs(L))}var je=ie,He=Fe;function Ye(){var t=new M(3);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Qe(t){var e=new M(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xe(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Ze(t,e,n){var r=new M(3);return r[0]=t,r[1]=e,r[2]=n,r}function We(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Je(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function Ke(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function $e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function tn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function en(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function nn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function rn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function an(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function on(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function sn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function un(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function cn(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function hn(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.hypot(n,r,a)}function fn(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function ln(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function dn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Mn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function vn(t,e){var n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function mn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pn(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[0],s=n[1],u=n[2];return t[0]=a*u-i*s,t[1]=i*o-r*u,t[2]=r*s-a*o,t}function bn(t,e,n,r){var a=e[0],i=e[1],o=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=o+r*(n[2]-o),t}function gn(t,e,n,r,a,i){var o=i*i,s=o*(2*i-3)+1,u=o*(i-2)+i,c=o*(i-1),h=o*(3-2*i);return t[0]=e[0]*s+n[0]*u+r[0]*c+a[0]*h,t[1]=e[1]*s+n[1]*u+r[1]*c+a[1]*h,t[2]=e[2]*s+n[2]*u+r[2]*c+a[2]*h,t}function yn(t,e,n,r,a,i){var o=1-i,s=o*o,u=i*i,c=s*o,h=3*i*s,f=3*u*o,l=u*i;return t[0]=e[0]*c+n[0]*h+r[0]*f+a[0]*l,t[1]=e[1]*c+n[1]*h+r[1]*f+a[1]*l,t[2]=e[2]*c+n[2]*h+r[2]*f+a[2]*l,t}function xn(t,e){e=e||1;var n=2*v()*Math.PI,r=2*v()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t}function _n(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,t}function wn(t,e,n){var r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function Sn(t,e,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=e[0],u=e[1],c=e[2],h=a*c-i*u,f=i*s-r*c,l=r*u-a*s,d=a*l-i*f,M=i*h-r*l,v=r*f-a*h,m=2*o;return h*=m,f*=m,l*=m,d*=2,M*=2,v*=2,t[0]=s+h+d,t[1]=u+f+M,t[2]=c+l+v,t}function Cn(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function Pn(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function qn(t,e,n,r){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function An(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2],u=Math.sqrt(n*n+r*r+a*a)*Math.sqrt(i*i+o*o+s*s),c=u&&mn(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function Un(t){return t[0]=0,t[1]=0,t[2]=0,t}function Tn(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function In(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Rn(t,e){var n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2];return Math.abs(n-i)<=d*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=d*Math.max(1,Math.abs(a),Math.abs(s))}var Bn,Ln=$e,On=tn,Gn=en,Dn=hn,En=fn,Fn=Xe,kn=ln,zn=(Bn=Ye(),function(t,e,n,r,a,i){var o,s;for(e||(e=3),n||(n=0),s=r?Math.min(r*e+n,t.length):t.length,o=n;o<s;o+=e)Bn[0]=t[o],Bn[1]=t[o+1],Bn[2]=t[o+2],a(Bn,Bn,i),t[o]=Bn[0],t[o+1]=Bn[1],t[o+2]=Bn[2];return t});function Vn(){var t=new M(4);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Nn(t){var e=new M(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function jn(t,e,n,r){var a=new M(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function Hn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Yn(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function Qn(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Xn(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function Zn(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function Wn(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function Jn(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Kn(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function $n(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function tr(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function er(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function nr(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function rr(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function ar(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.hypot(n,r,a,i)}function ir(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+a*a+i*i}function or(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.hypot(e,n,r,a)}function sr(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function ur(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function cr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function hr(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n*n+r*r+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=i*o,t}function fr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function lr(t,e,n,r){var a=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],o=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],h=e[0],f=e[1],l=e[2],d=e[3];return t[0]=f*c-l*u+d*s,t[1]=-h*c+l*o-d*i,t[2]=h*u-f*o+d*a,t[3]=-h*s+f*i-l*a,t}function dr(t,e,n,r){var a=e[0],i=e[1],o=e[2],s=e[3];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=o+r*(n[2]-o),t[3]=s+r*(n[3]-s),t}function Mr(t,e){var n,r,a,i,o,s;e=e||1;do{o=(n=2*v()-1)*n+(r=2*v()-1)*r}while(o>=1);do{s=(a=2*v()-1)*a+(i=2*v()-1)*i}while(s>=1);var u=Math.sqrt((1-o)/s);return t[0]=e*n,t[1]=e*r,t[2]=e*a*u,t[3]=e*i*u,t}function vr(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,t[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,t[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,t[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,t}function mr(t,e,n){var r=e[0],a=e[1],i=e[2],o=n[0],s=n[1],u=n[2],c=n[3],h=c*r+s*i-u*a,f=c*a+u*r-o*i,l=c*i+o*a-s*r,d=-o*r-s*a-u*i;return t[0]=h*c+d*-o+f*-u-l*-s,t[1]=f*c+d*-s+l*-o-h*-u,t[2]=l*c+d*-u+h*-s-f*-o,t[3]=e[3],t}function pr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function br(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function gr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function yr(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-u)<=d*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-c)<=d*Math.max(1,Math.abs(i),Math.abs(c))}var xr=Xn,_r=Zn,wr=Wn,Sr=ar,Cr=ir,Pr=or,qr=sr,Ar=function(){var t=Vn();return function(e,n,r,a,i,o){var s,u;for(n||(n=4),r||(r=0),u=a?Math.min(a*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function Ur(){var t=new M(4);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Tr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ir(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function Rr(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return r>d?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function Br(t,e){var n=ua(t,e);return Math.acos(2*n*n-1)}function Lr(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],u=n[1],c=n[2],h=n[3];return t[0]=r*h+o*s+a*c-i*u,t[1]=a*h+o*u+i*s-r*c,t[2]=i*h+o*c+r*u-a*s,t[3]=o*h-r*s-a*u-i*c,t}function Or(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=i*u-a*s,t[3]=o*u-r*s,t}function Gr(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-i*s,t[1]=a*u+o*s,t[2]=i*u+r*s,t[3]=o*u-a*s,t}function Dr(t,e,n){n*=.5;var r=e[0],a=e[1],i=e[2],o=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=a*u-r*s,t[2]=i*u+o*s,t[3]=o*u-i*s,t}function Er(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t}function Fr(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=Math.sqrt(n*n+r*r+a*a),s=Math.exp(i),u=o>0?s*Math.sin(o)/o:0;return t[0]=n*u,t[1]=r*u,t[2]=a*u,t[3]=s*Math.cos(o),t}function kr(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=Math.sqrt(n*n+r*r+a*a),s=o>0?Math.atan2(o,i)/o:0;return t[0]=n*s,t[1]=r*s,t[2]=a*s,t[3]=.5*Math.log(n*n+r*r+a*a+i*i),t}function zr(t,e,n){return kr(t,e),sa(t,t,n),Fr(t,t),t}function Vr(t,e,n,r){var a,i,o,s,u,c=e[0],h=e[1],f=e[2],l=e[3],M=n[0],v=n[1],m=n[2],p=n[3];return(i=c*M+h*v+f*m+l*p)<0&&(i=-i,M=-M,v=-v,m=-m,p=-p),1-i>d?(a=Math.acos(i),o=Math.sin(a),s=Math.sin((1-r)*a)/o,u=Math.sin(r*a)/o):(s=1-r,u=r),t[0]=s*c+u*M,t[1]=s*h+u*v,t[2]=s*f+u*m,t[3]=s*l+u*p,t}function Nr(t){var e=v(),n=v(),r=v(),a=Math.sqrt(1-e),i=Math.sqrt(e);return t[0]=a*Math.sin(2*Math.PI*n),t[1]=a*Math.cos(2*Math.PI*n),t[2]=i*Math.sin(2*Math.PI*r),t[3]=i*Math.cos(2*Math.PI*r),t}function jr(t,e){var n=e[0],r=e[1],a=e[2],i=e[3],o=n*n+r*r+a*a+i*i,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-a*s,t[3]=i*s,t}function Hr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Yr(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var i=(a+1)%3,o=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*i+i]-e[3*o+o]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*i+o]-e[3*o+i])*n,t[i]=(e[3*i+a]+e[3*a+i])*n,t[o]=(e[3*o+a]+e[3*a+o])*n}return t}function Qr(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var i=Math.sin(e),o=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),h=Math.cos(r);return t[0]=i*u*h-o*s*c,t[1]=o*s*h+i*u*c,t[2]=o*u*c-i*s*h,t[3]=o*u*h+i*s*c,t}function Xr(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Zr,Wr,Jr,Kr,$r,ta,ea=Nn,na=jn,ra=Hn,aa=Yn,ia=Qn,oa=Lr,sa=nr,ua=fr,ca=dr,ha=or,fa=ha,la=sr,da=la,Ma=hr,va=gr,ma=yr,pa=(Zr=Ye(),Wr=Ze(1,0,0),Jr=Ze(0,1,0),function(t,e,n){var r=mn(e,n);return r<-.999999?(pn(Zr,Wr,e),Fn(Zr)<1e-6&&pn(Zr,Jr,e),vn(Zr,Zr),Ir(t,Zr,Math.PI),t):r>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(pn(Zr,e,n),t[0]=Zr[0],t[1]=Zr[1],t[2]=Zr[2],t[3]=1+r,Ma(t,t))}),ba=(Kr=Ur(),$r=Ur(),function(t,e,n,r,a,i){return Vr(Kr,e,a,i),Vr($r,n,r,i),Vr(t,Kr,$r,2*i*(1-i)),t}),ga=(ta=pt(),function(t,e,n,r){return ta[0]=n[0],ta[3]=n[1],ta[6]=n[2],ta[1]=r[0],ta[4]=r[1],ta[7]=r[2],ta[2]=-e[0],ta[5]=-e[1],ta[8]=-e[2],Ma(t,Yr(t,ta))});function ya(){var t=new M(8);return M!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function xa(t){var e=new M(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function _a(t,e,n,r,a,i,o,s){var u=new M(8);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=a,u[5]=i,u[6]=o,u[7]=s,u}function wa(t,e,n,r,a,i,o){var s=new M(8);s[0]=t,s[1]=e,s[2]=n,s[3]=r;var u=.5*a,c=.5*i,h=.5*o;return s[4]=u*r+c*n-h*e,s[5]=c*r+h*t-u*n,s[6]=h*r+u*e-c*t,s[7]=-u*t-c*e-h*n,s}function Sa(t,e,n){var r=.5*n[0],a=.5*n[1],i=.5*n[2],o=e[0],s=e[1],u=e[2],c=e[3];return t[0]=o,t[1]=s,t[2]=u,t[3]=c,t[4]=r*c+a*u-i*s,t[5]=a*c+i*o-r*u,t[6]=i*c+r*s-a*o,t[7]=-r*o-a*s-i*u,t}function Ca(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Pa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function qa(t,e){var n=Ur();_e(n,e);var r=new M(3);return ye(r,e),Sa(t,n,r),t}function Aa(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Ua(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ta(t,e,n,r,a,i,o,s,u){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t}var Ia=ra;function Ra(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Ba=ra;function La(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Oa(t,e){var n=e[4],r=e[5],a=e[6],i=e[7],o=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(n*c+i*o+r*u-a*s),t[1]=2*(r*c+i*s+a*o-n*u),t[2]=2*(a*c+i*u+n*s-r*o),t}function Ga(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=.5*n[0],u=.5*n[1],c=.5*n[2],h=e[4],f=e[5],l=e[6],d=e[7];return t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=o*s+a*c-i*u+h,t[5]=o*u+i*s-r*c+f,t[6]=o*c+r*u-a*s+l,t[7]=-r*s-a*u-i*c+d,t}function Da(t,e,n){var r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=s*o+h*r+u*i-c*a,l=u*o+h*a+c*r-s*i,d=c*o+h*i+s*a-u*r,M=h*o-s*r-u*a-c*i;return Or(t,e,n),r=t[0],a=t[1],i=t[2],o=t[3],t[4]=f*o+M*r+l*i-d*a,t[5]=l*o+M*a+d*r-f*i,t[6]=d*o+M*i+f*a-l*r,t[7]=M*o-f*r-l*a-d*i,t}function Ea(t,e,n){var r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=s*o+h*r+u*i-c*a,l=u*o+h*a+c*r-s*i,d=c*o+h*i+s*a-u*r,M=h*o-s*r-u*a-c*i;return Gr(t,e,n),r=t[0],a=t[1],i=t[2],o=t[3],t[4]=f*o+M*r+l*i-d*a,t[5]=l*o+M*a+d*r-f*i,t[6]=d*o+M*i+f*a-l*r,t[7]=M*o-f*r-l*a-d*i,t}function Fa(t,e,n){var r=-e[0],a=-e[1],i=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=s*o+h*r+u*i-c*a,l=u*o+h*a+c*r-s*i,d=c*o+h*i+s*a-u*r,M=h*o-s*r-u*a-c*i;return Dr(t,e,n),r=t[0],a=t[1],i=t[2],o=t[3],t[4]=f*o+M*r+l*i-d*a,t[5]=l*o+M*a+d*r-f*i,t[6]=d*o+M*i+f*a-l*r,t[7]=M*o-f*r-l*a-d*i,t}function ka(t,e,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=e[0],u=e[1],c=e[2],h=e[3];return t[0]=s*o+h*r+u*i-c*a,t[1]=u*o+h*a+c*r-s*i,t[2]=c*o+h*i+s*a-u*r,t[3]=h*o-s*r-u*a-c*i,s=e[4],u=e[5],c=e[6],h=e[7],t[4]=s*o+h*r+u*i-c*a,t[5]=u*o+h*a+c*r-s*i,t[6]=c*o+h*i+s*a-u*r,t[7]=h*o-s*r-u*a-c*i,t}function za(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[0],u=n[1],c=n[2],h=n[3];return t[0]=r*h+o*s+a*c-i*u,t[1]=a*h+o*u+i*s-r*c,t[2]=i*h+o*c+r*u-a*s,t[3]=o*h-r*s-a*u-i*c,s=n[4],u=n[5],c=n[6],h=n[7],t[4]=r*h+o*s+a*c-i*u,t[5]=a*h+o*u+i*s-r*c,t[6]=i*h+o*c+r*u-a*s,t[7]=o*h-r*s-a*u-i*c,t}function Va(t,e,n,r){if(Math.abs(r)<d)return Aa(t,e);var a=Math.hypot(n[0],n[1],n[2]);r*=.5;var i=Math.sin(r),o=i*n[0]/a,s=i*n[1]/a,u=i*n[2]/a,c=Math.cos(r),h=e[0],f=e[1],l=e[2],M=e[3];t[0]=h*c+M*o+f*u-l*s,t[1]=f*c+M*s+l*o-h*u,t[2]=l*c+M*u+h*s-f*o,t[3]=M*c-h*o-f*s-l*u;var v=e[4],m=e[5],p=e[6],b=e[7];return t[4]=v*c+b*o+m*u-p*s,t[5]=m*c+b*s+p*o-v*u,t[6]=p*c+b*u+v*s-m*o,t[7]=b*c-v*o-m*s-p*u,t}function Na(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function ja(t,e,n){var r=e[0],a=e[1],i=e[2],o=e[3],s=n[4],u=n[5],c=n[6],h=n[7],f=e[4],l=e[5],d=e[6],M=e[7],v=n[0],m=n[1],p=n[2],b=n[3];return t[0]=r*b+o*v+a*p-i*m,t[1]=a*b+o*m+i*v-r*p,t[2]=i*b+o*p+r*m-a*v,t[3]=o*b-r*v-a*m-i*p,t[4]=r*h+o*s+a*c-i*u+f*b+M*v+l*p-d*m,t[5]=a*h+o*u+i*s-r*c+l*b+M*m+d*v-f*p,t[6]=i*h+o*c+r*u-a*s+d*b+M*p+f*m-l*v,t[7]=o*h-r*s-a*u-i*c+M*b-f*v-l*m-d*p,t}var Ha=ja;function Ya(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var Qa=ua;function Xa(t,e,n,r){var a=1-r;return Qa(e,n)<0&&(r=-r),t[0]=e[0]*a+n[0]*r,t[1]=e[1]*a+n[1]*r,t[2]=e[2]*a+n[2]*r,t[3]=e[3]*a+n[3]*r,t[4]=e[4]*a+n[4]*r,t[5]=e[5]*a+n[5]*r,t[6]=e[6]*a+n[6]*r,t[7]=e[7]*a+n[7]*r,t}function Za(t,e){var n=$a(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function Wa(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Ja=ha,Ka=Ja,$a=la,ti=$a;function ei(t,e){var n=$a(e);if(n>0){n=Math.sqrt(n);var r=e[0]/n,a=e[1]/n,i=e[2]/n,o=e[3]/n,s=e[4],u=e[5],c=e[6],h=e[7],f=r*s+a*u+i*c+o*h;t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=(s-r*f)/n,t[5]=(u-a*f)/n,t[6]=(c-i*f)/n,t[7]=(h-o*f)/n}return t}function ni(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ri(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ai(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],c=t[7],h=e[0],f=e[1],l=e[2],M=e[3],v=e[4],m=e[5],p=e[6],b=e[7];return Math.abs(n-h)<=d*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-f)<=d*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-l)<=d*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-M)<=d*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(o-v)<=d*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-m)<=d*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-p)<=d*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(c-b)<=d*Math.max(1,Math.abs(c),Math.abs(b))}function ii(){var t=new M(2);return M!=Float32Array&&(t[0]=0,t[1]=0),t}function oi(t){var e=new M(2);return e[0]=t[0],e[1]=t[1],e}function si(t,e){var n=new M(2);return n[0]=t,n[1]=e,n}function ui(t,e){return t[0]=e[0],t[1]=e[1],t}function ci(t,e,n){return t[0]=e,t[1]=n,t}function hi(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function fi(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function li(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function di(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function Mi(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function vi(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function mi(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function pi(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function bi(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function gi(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function yi(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function xi(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.hypot(n,r)}function _i(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function wi(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function Si(t){var e=t[0],n=t[1];return e*e+n*n}function Ci(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Pi(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function qi(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t}function Ai(t,e){return t[0]*e[0]+t[1]*e[1]}function Ui(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function Ti(t,e,n,r){var a=e[0],i=e[1];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t}function Ii(t,e){e=e||1;var n=2*v()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function Ri(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t}function Bi(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t}function Li(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t}function Oi(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t}function Gi(t,e,n,r){var a=e[0]-n[0],i=e[1]-n[1],o=Math.sin(r),s=Math.cos(r);return t[0]=a*s-i*o+n[0],t[1]=a*o+i*s+n[1],t}function Di(t,e){var n=t[0],r=t[1],a=e[0],i=e[1],o=Math.sqrt(n*n+r*r)*Math.sqrt(a*a+i*i),s=o&&(n*a+r*i)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function Ei(t){return t[0]=0,t[1]=0,t}function Fi(t){return"vec2("+t[0]+", "+t[1]+")"}function ki(t,e){return t[0]===e[0]&&t[1]===e[1]}function zi(t,e){var n=t[0],r=t[1],a=e[0],i=e[1];return Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=d*Math.max(1,Math.abs(r),Math.abs(i))}var Vi=wi,Ni=fi,ji=li,Hi=di,Yi=xi,Qi=_i,Xi=Si,Zi=function(){var t=ii();return function(e,n,r,a,i,o){var s,u;for(n||(n=2),r||(r=0),u=a?Math.min(a*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],i(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}()},830:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Camera=void 0;const r=n(887);e.Camera=class{constructor(t){this.position=new Float32Array(t),this.theta=0,this.phi=0,this.recalculate_vectors()}recalculate_vectors(){this.forwards=new Float32Array([Math.cos(180*this.theta/Math.PI)*Math.cos(180*this.phi/Math.PI),Math.sin(180*this.theta/Math.PI)*Math.cos(180*this.phi/Math.PI),Math.sin(180*this.phi/Math.PI)]),this.right=new Float32Array([0,0,0]),r.vec3.cross(this.right,this.forwards,[0,0,1]),this.up=new Float32Array([0,0,0]),r.vec3.cross(this.up,this.right,this.forwards)}}},826:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.CubeMapMaterial=void 0,e.CubeMapMaterial=class{initialize(t,e){return n(this,void 0,void 0,(function*(){let n=new Array(6);for(let t=0;t<6;t++){const r=yield fetch(e[t]),a=yield r.blob();n[t]=yield createImageBitmap(a)}yield this.loadImageBitmaps(t,n),this.view=this.texture.createView({format:"rgba8unorm",dimension:"cube",aspect:"all",baseMipLevel:0,mipLevelCount:1,baseArrayLayer:0,arrayLayerCount:6}),this.sampler=t.createSampler({addressModeU:"repeat",addressModeV:"repeat",magFilter:"linear",minFilter:"nearest",maxAnisotropy:1})}))}loadImageBitmaps(t,e){return n(this,void 0,void 0,(function*(){const n={dimension:"2d",size:{width:e[0].width,height:e[0].height,depthOrArrayLayers:6},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT};this.texture=t.createTexture(n);for(let n=0;n<6;n++)t.queue.copyExternalImageToTexture({source:e[n]},{texture:this.texture,origin:{x:0,y:0,z:n}},[e[n].width,e[n].height])}))}}},697:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0,e.Node=class{}},419:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(a,i){function o(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Renderer=void 0;const i=a(n(224)),o=a(n(657)),s=n(147),u=n(826);e.Renderer=class{constructor(t,e){this.render_count=0,this.stars=!0,this.camera_movement=!0,this.changing_scroll=!1,this.alpha_multiplier=1,this.render=()=>{let t=performance.now();this.updateSpheres(),this.scene.buildBVH(),this.changing_scroll&&this.moveCameraToStart(),this.camera_movement&&this.updateCamera(),this.prepareScene();const e=this.device.createCommandEncoder(),n=e.beginComputePass();n.setPipeline(this.ray_tracing_pipeline),n.setBindGroup(0,this.ray_tracing_bind_group),n.dispatchWorkgroups(Math.floor(this.canvas.width/8),Math.floor(this.canvas.height/8),1),n.end();const r=this.context.getCurrentTexture().createView(),a=e.beginRenderPass({colorAttachments:[{view:r,clearValue:{r:.5,g:0,b:.25,a:1},loadOp:"clear",storeOp:"store"}]});a.setPipeline(this.screen_pipeline),a.setBindGroup(0,this.screen_bind_group),a.draw(6,1,0,0),a.end(),this.device.queue.submit([e.finish()]),this.device.queue.onSubmittedWorkDone().then((()=>{let e=performance.now();this.frametime=e-t;const n=document.getElementById("render-time");null!=n?n.innerText=this.frametime.toString():console.log(this.frametime)})),this.render_count++,this.animation_id=requestAnimationFrame(this.render)},this.canvas=t,this.scene=e}Initialize(){return r(this,void 0,void 0,(function*(){yield this.setupDevice(),yield this.makeBindGroupLayouts(),yield this.createAssets(),yield this.makeBindGroups(),yield this.makePipelines(),this.frametime=16,this.logged=!1,this.render()}))}setupDevice(){var t,e;return r(this,void 0,void 0,(function*(){this.adapter=yield null===(t=navigator.gpu)||void 0===t?void 0:t.requestAdapter(),this.device=yield null===(e=this.adapter)||void 0===e?void 0:e.requestDevice(),this.context=this.canvas.getContext("webgpu"),console.log(this.context),null!=this.context&&null!=this.context||(alert("WebGPU not supported, please use Chrome and enable hardware acceleration"),window.location.href="/about"),this.format="bgra8unorm",this.context.configure({device:this.device,format:this.format,alphaMode:"opaque"})}))}makeBindGroupLayouts(){return r(this,void 0,void 0,(function*(){this.ray_tracing_bind_group_layout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,storageTexture:{access:"write-only",format:"rgba8unorm",viewDimension:"2d"}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform"}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:4,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:5,visibility:GPUShaderStage.COMPUTE,texture:{viewDimension:"cube"}},{binding:6,visibility:GPUShaderStage.COMPUTE,sampler:{}}]}),this.screen_bind_group_layout=this.device.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT,sampler:{}},{binding:1,visibility:GPUShaderStage.FRAGMENT,texture:{}}]})}))}makeBindGroups(){return r(this,void 0,void 0,(function*(){this.ray_tracing_bind_group=this.device.createBindGroup({layout:this.ray_tracing_bind_group_layout,entries:[{binding:0,resource:this.color_buffer_view},{binding:1,resource:{buffer:this.sceneParameters}},{binding:2,resource:{buffer:this.sphereBuffer}},{binding:3,resource:{buffer:this.nodeBuffer}},{binding:4,resource:{buffer:this.sphereIndexBuffer}},{binding:5,resource:this.spaceMaterial.view},{binding:6,resource:this.spaceMaterial.sampler}]}),this.screen_bind_group=this.device.createBindGroup({layout:this.screen_bind_group_layout,entries:[{binding:0,resource:this.sampler},{binding:1,resource:this.color_buffer_view}]})}))}makePipelines(){return r(this,void 0,void 0,(function*(){const t=this.device.createPipelineLayout({bindGroupLayouts:[this.ray_tracing_bind_group_layout]});this.ray_tracing_pipeline=this.device.createComputePipeline({layout:t,compute:{module:this.device.createShaderModule({code:i.default}),entryPoint:"main"}});const e=this.device.createPipelineLayout({bindGroupLayouts:[this.screen_bind_group_layout]});this.screen_pipeline=this.device.createRenderPipeline({layout:e,vertex:{module:this.device.createShaderModule({code:o.default}),entryPoint:"vert_main"},fragment:{module:this.device.createShaderModule({code:o.default}),entryPoint:"frag_main",targets:[{format:"bgra8unorm"}]},primitive:{topology:"triangle-list"}})}))}createAssets(){return r(this,void 0,void 0,(function*(){this.color_buffer=this.device.createTexture({size:{width:this.canvas.width,height:this.canvas.height},format:"rgba8unorm",usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.TEXTURE_BINDING}),this.color_buffer_view=this.color_buffer.createView(),this.sampler=this.device.createSampler({addressModeU:"repeat",addressModeV:"repeat",magFilter:"linear",minFilter:"nearest",mipmapFilter:"nearest",maxAnisotropy:1});const t={size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST};this.sceneParameters=this.device.createBuffer(t);const e={size:4*this.scene.spheres.length*4*2,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST};this.sphereBuffer=this.device.createBuffer(e);const n={size:4*this.scene.nodesUsed*4*2*2,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST};this.nodeBuffer=this.device.createBuffer(n);const r={size:4*this.scene.spheres.length,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST};this.sphereIndexBuffer=this.device.createBuffer(r),this.spaceMaterial=new u.CubeMapMaterial,yield this.spaceMaterial.initialize(this.device,["dist/skybox_3/front.png","dist/skybox_3/back.png","dist/skybox_3/left.png","dist/skybox_3/right.png","dist/skybox_3/bottom.png","dist/skybox_3/top.png"])}))}updateSpheres(){for(let t=1;t<this.scene.sphereCountLarge;t++){const e=this.scene.spheres[t];e.center[0]+=Math.cos(this.render_count/100/t)*Math.pow(t,2),e.center[1]+=Math.sin(this.render_count/100/t)*Math.pow(t,2)}}updateCamera(){this.scene.camera.position[0]+=Math.cos(this.render_count/1e3),this.scene.camera.position[1]+=Math.sin(this.render_count/1e3),this.scene.camera.theta+=5e-5,this.scene.camera.recalculate_vectors()}prepareScene(){this.scene.camera.recalculate_vectors();const t={cameraPos:this.scene.camera.position,cameraForwards:this.scene.camera.forwards,cameraRight:this.scene.camera.right,cameraUp:this.scene.camera.up,sphereCount:this.scene.spheres.length};this.device.queue.writeBuffer(this.sceneParameters,0,new Float32Array([t.cameraPos[0],t.cameraPos[1],t.cameraPos[2],0,t.cameraForwards[0],t.cameraForwards[1],t.cameraForwards[2],this.alpha_multiplier,t.cameraRight[0],t.cameraRight[1],t.cameraRight[2],4,t.cameraUp[0],t.cameraUp[1],t.cameraUp[2],t.sphereCount]),0,16);const e=new Float32Array(4*this.scene.spheres.length*2);for(let t=0;t<this.scene.spheres.length;t++){const n=this.scene.spheres[t];e[8*t]=n.center[0],e[8*t+1]=n.center[1],e[8*t+2]=n.center[2],e[8*t+3]=0,e[8*t+4]=n.color[0],e[8*t+5]=n.color[1],e[8*t+6]=n.color[2],e[8*t+7]=n.radius}this.device.queue.writeBuffer(this.sphereBuffer,0,e,0,4*this.scene.spheres.length*2);const n=new Float32Array(4*this.scene.nodesUsed*2);for(let t=0;t<this.scene.nodesUsed;t++){const e=this.scene.nodes[t];n[8*t]=e.minCorner[0],n[8*t+1]=e.minCorner[1],n[8*t+2]=e.minCorner[2],n[8*t+3]=this.scene.nodes[t].leftChild,n[8*t+4]=e.maxCorner[0],n[8*t+5]=e.maxCorner[1],n[8*t+6]=e.maxCorner[2],n[8*t+7]=e.sphereCount}this.device.queue.writeBuffer(this.nodeBuffer,0,n,0,4*this.scene.nodesUsed*2);const r=new Float32Array(this.scene.spheres.length);for(let t=0;t<this.scene.spheres.length;t++)r[t]=this.scene.sphereIndices[t];this.device.queue.writeBuffer(this.sphereIndexBuffer,0,r,0,this.scene.spheres.length)}toggleCameraMovement(){this.camera_movement=!this.camera_movement}toggleStars(t){this.stars=!this.stars,this.stars?this.scene=new s.Scene(this.scene.sphereCountLarge,t):this.scene=new s.Scene(this.scene.sphereCountLarge,0),this.render_count=0}moveCameraToStart(){this.scene.camera.position[0]+=2,this.scene.camera.position[1]+=2,this.alpha_multiplier+=.1}}},147:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Scene=void 0;const r=n(704),a=n(830),i=n(697),o=n(887);e.Scene=class{constructor(t,e){this.nodesUsed=0,this.sphereCountLarge=t,this.sphereCountSmall=e;const n=20,i=5e3;this.spheres=new Array(this.sphereCountLarge+this.sphereCountSmall);for(let t=0;t<this.sphereCountLarge;t++){const e=[0==t?0:3*t*n-(this.sphereCountLarge-2)*n,0==t?0:4*-t*n-(this.sphereCountLarge-2)*n,0];let a=n*(.8+.2*Math.random());0==t&&(a+=n);const i=[.7+.3*Math.random(),.7+.3*Math.random(),.7+.3*Math.random()];this.spheres[t]=new r.Sphere(e,a,i)}for(let t=this.sphereCountLarge;t<this.sphereCountLarge+this.sphereCountSmall;t++){const e=[i*(Math.random()-.5),i*(Math.random()-.5),i*(Math.random()-.5)];e[t%3]+=1e3,e[t%3]*=Math.random()<.5?-1:1;const n=2*(.5+.5*Math.random()),a=5,o=[a,a,a];this.spheres[t]=new r.Sphere(e,n,o)}this.camera=new a.Camera([-400,-300,-150]),this.camera.theta=.12,this.camera.phi=.006,this.buildBVH()}buildBVH(){this.nodesUsed=0,this.sphereIndices=new Array(this.spheres.length);for(let t=0;t<this.spheres.length;t++)this.sphereIndices[t]=t;this.nodes=new Array(2*this.spheres.length-1);for(let t=0;t<2*this.spheres.length-1;t++)this.nodes[t]=new i.Node;let t=this.nodes[0];t.leftChild=0,t.sphereCount=this.spheres.length,this.nodesUsed+=1,this.updateBounds(0),this.subdivide(0)}updateBounds(t){let e=this.nodes[t];e.minCorner=[999999,999999,999999],e.maxCorner=[-999999,-999999,-999999];for(let t=0;t<e.sphereCount;t++){const n=this.spheres[this.sphereIndices[e.leftChild+t]],r=[n.radius,n.radius,n.radius];let a=[0,0,0];o.vec3.subtract(a,n.center,r),o.vec3.min(e.minCorner,e.minCorner,a),o.vec3.add(a,n.center,r),o.vec3.max(e.maxCorner,e.maxCorner,a)}}subdivide(t){let e=this.nodes[t];if(e.sphereCount<=2)return;let n=[0,0,0];o.vec3.subtract(n,e.maxCorner,e.minCorner);let r=0;n[1]>n[r]&&(r=1),n[2]>n[r]&&(r=2);const a=e.minCorner[r]+n[r]/2;let i=e.leftChild,s=i+e.sphereCount-1;for(;i<=s;)if(this.spheres[this.sphereIndices[i]].center[r]<a)i+=1;else{const t=this.sphereIndices[i];this.sphereIndices[i]=this.sphereIndices[s],this.sphereIndices[s]=t,s-=1}let u=i-e.leftChild;if(0==u||u==e.sphereCount)return;const c=this.nodesUsed;this.nodesUsed+=1;const h=this.nodesUsed;this.nodesUsed+=1,this.nodes[c].leftChild=e.leftChild,this.nodes[c].sphereCount=u,this.nodes[h].leftChild=i,this.nodes[h].sphereCount=e.sphereCount-u,e.leftChild=c,e.sphereCount=0,this.updateBounds(c),this.updateBounds(h),this.subdivide(c),this.subdivide(h)}}},704:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sphere=void 0,e.Sphere=class{constructor(t,e,n){this.center=new Float32Array(t),this.radius=e,this.color=new Float32Array(n)}}},224:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});const r="struct Sphere {\n    center: vec3<f32>,\n    color: vec3<f32>,\n    radius: f32,\n}\n\nstruct ObjectData {\n    spheres: array<Sphere>,\n}\n\nstruct Node {\n    minCorner: vec3<f32>,\n    leftChild: f32,\n    maxCorner: vec3<f32>,\n    sphereCount: f32,\n}\n\nstruct BVH {\n    nodes: array<Node>,\n}\n\nstruct ObjectIndices {\n    sphereIndices: array<f32>,\n}\n\nstruct Ray {\n    direction: vec3<f32>,\n    origin: vec3<f32>,\n}\n\nstruct SceneData {\n    cameraPos: vec3<f32>,\n    cameraForwards: vec3<f32>,\n    alphaMultiplier: f32,\n    cameraRight: vec3<f32>,\n    maxBounces: f32,\n    cameraUp: vec3<f32>,\n    sphereCount: f32,\n}\n\nstruct RenderState {\n    t: f32,\n    color: vec3<f32>,\n    hit: bool,\n    position: vec3<f32>,\n    normal: vec3<f32>,\n}\n\n@group(0) @binding(0) var color_buffer : texture_storage_2d<rgba8unorm, write>;\n@group(0) @binding(1) var<uniform> scene : SceneData;\n@group(0) @binding(2) var<storage, read> objects : ObjectData;\n@group(0) @binding(3) var<storage, read> tree : BVH;\n@group(0) @binding(4) var<storage, read> sphereLookup : ObjectIndices;\n@group(0) @binding(5) var spaceTexture : texture_cube<f32>;\n@group(0) @binding(6) var spaceSampler : sampler;\n\n@compute @workgroup_size(8,8,1)\nfn main(@builtin(global_invocation_id) GlobalInvocationID : vec3<u32>) {\n\n    let screen_size : vec2<i32> = vec2<i32>(textureDimensions(color_buffer));\n    let screen_pos : vec2<i32> = vec2<i32>(i32(GlobalInvocationID.x), i32(GlobalInvocationID.y));\n\n    let horizontal_coefficient : f32 = (f32(screen_pos.x) - f32(screen_size.x) / 2) / f32(screen_size.x);\n    let vertical_coefficient : f32 = (f32(screen_pos.y) - f32(screen_size.y) / 2) / f32(screen_size.x);\n\n    let forwards : vec3<f32> = scene.cameraForwards;\n    let right : vec3<f32> = scene.cameraRight;\n    let up : vec3<f32> = scene.cameraUp;\n\n    var ray : Ray;\n    ray.direction = normalize(forwards + horizontal_coefficient * right + vertical_coefficient * up);\n    ray.origin = scene.cameraPos;\n\n    let pixel_color : vec3<f32> = rayColor(ray);\n\n    textureStore(color_buffer, screen_pos, vec4<f32>(pixel_color, 1.0));\n}\n\nfn rayColor(ray : Ray) -> vec3<f32> {\n\n    var color : vec3<f32> = vec3(1.0, 1.0, 1.0);\n    var result : RenderState;\n\n    var temp_ray : Ray;\n    temp_ray.origin = ray.origin;\n    temp_ray.direction = ray.direction;\n\n    let bounces : u32 = u32(scene.maxBounces);\n    for(var bounce : u32 = 0; bounce < bounces; bounce++) {\n\n        result = trace(temp_ray);\n\n        color = color * result.color;\n\n        if (!result.hit) {\n            break;\n        }\n\n        temp_ray.origin = result.position;\n        temp_ray.direction = normalize(reflect(temp_ray.direction, result.normal));\n    }\n\n    if (result.hit) {\n        color = vec3(0.0, 0.0, 0.0);\n    }\n\n    color = color * scene.alphaMultiplier;\n\n    return color;\n}\n\nfn trace(ray : Ray) -> RenderState {\n\n    var renderState : RenderState;\n    renderState.hit = false;\n    var nearestHit : f32 = 9999;\n\n    var node : Node = tree.nodes[0];\n    var stack : array<Node, 15>;\n    var stackLocation : u32 = 0;\n\n    while (true) {\n\n        var sphereCount : u32 = u32(node.sphereCount);\n        var contents : u32 = u32(node.leftChild);\n\n        if (sphereCount == 0) {\n            var child1 : Node = tree.nodes[contents];\n            var child2 : Node = tree.nodes[contents + 1];\n\n            var distance1 : f32 = hit_aabb(ray, child1);\n            var distance2 : f32 = hit_aabb(ray, child2);\n            if (distance1 > distance2) {\n                var tempDist : f32 = distance1;\n                distance1 = distance2;\n                distance2 = tempDist;\n\n                var tempChild : Node = child1;\n                child1 = child2;\n                child2 = tempChild;\n            }\n\n            if (distance1 > nearestHit) {\n                if (stackLocation == 0) {\n                    break;\n                }\n                else {\n                    stackLocation -= 1;\n                    node = stack[stackLocation];\n                }\n            }\n            else {\n                node = child1;\n                if (distance2 < nearestHit) {\n                    stack[stackLocation] = child2;\n                    stackLocation += 1;\n                }\n            }\n        }\n        else {\n            for (var i : u32 = 0; i < sphereCount; i++) {\n\n                var newRenderState : RenderState = hit_sphere(\n                    ray,\n                    objects.spheres[u32(sphereLookup.sphereIndices[i + contents])],\n                    0.001, nearestHit, renderState\n                );\n\n                if (newRenderState.hit) {\n                    nearestHit = newRenderState.t;\n                    renderState = newRenderState;\n                }\n            }\n\n            if (stackLocation == 0) {\n                break;\n            }\n            else {\n                stackLocation -= 1;\n                node = stack[stackLocation];\n            }\n        }\n    }\n\n    if (!renderState.hit) {\n        renderState.color = textureSampleLevel(spaceTexture, spaceSampler, ray.direction, 0.0).xyz;\n    }\n\n    return renderState;\n}\n\nfn hit_sphere(ray : Ray, sphere : Sphere, tMin : f32, tMax : f32, oldRenderState : RenderState) -> RenderState {\n\n    let co : vec3<f32> = ray.origin - sphere.center;\n    let a : f32 = dot(ray.direction, ray.direction);\n    let b : f32 = 2.0 * dot(ray.direction, co);\n    let c : f32 = dot(co, co) - sphere.radius * sphere.radius;\n    let discriminant: f32 = b * b - 4.0 * a * c;\n\n    var renderState: RenderState;\n    renderState.color = oldRenderState.color;\n\n    if (discriminant > 0.0) {\n\n        let t : f32 = (-b - sqrt(discriminant)) / (2 * a);\n\n        if (t > tMin && t < tMax) {\n\n            renderState.position = ray.origin + t * ray.direction;\n            renderState.normal = normalize(renderState.position - sphere.center);\n            renderState.t = t;\n            renderState.color = sphere.color;\n            renderState.hit = true;\n            return renderState;\n        }\n    }\n\n    renderState.hit = false;\n    return renderState;\n\n}\n\nfn hit_aabb(ray : Ray, node : Node) -> f32 {\n    var inverseDir : vec3<f32> = vec3(1.0) / ray.direction;\n    var t1 : vec3<f32> = (node.minCorner - ray.origin) * inverseDir;\n    var t2 : vec3<f32> = (node.maxCorner - ray.origin) * inverseDir;\n    var tMin : vec3<f32> = min(t1, t2);\n    var tMax : vec3<f32> = max(t1, t2);\n\n    var t_min : f32 = max(max(tMin.x, tMin.y), tMin.z);\n    var t_max : f32 = min(min(tMax.x, tMax.y), tMax.z);\n\n    if (t_min > t_max || t_max < 0) {\n        return 99999;\n    }\n    else {\n        return t_min;\n    }\n}"},657:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});const r="\n@binding(0) @group(0) var screen_sampler : sampler;\n@binding(1) @group(0) var color_buffer : texture_2d<f32>;\n\nstruct VertexOutput {\n    @builtin(position) Position : vec4<f32>,\n    @location(0) TexCoord : vec2<f32>\n}\n\n@vertex\nfn vert_main(@builtin(vertex_index) VertexIndex : u32) -> VertexOutput {\n\n    let positions = array<vec2<f32>, 6>(\n        vec2<f32>(1.0, 1.0),\n        vec2<f32>(1.0, -1.0),\n        vec2<f32>(-1.0, -1.0),\n        vec2<f32>(1.0, 1.0),\n        vec2<f32>(-1.0, -1.0),\n        vec2<f32>(-1.0, 1.0),\n    );\n\n    let texCoords = array<vec2<f32>, 6>(\n        vec2<f32>(1.0, 0.0),\n        vec2<f32>(1.0, 1.0),\n        vec2<f32>(0.0, 1.0),\n        vec2<f32>(1.0, 0.0),\n        vec2<f32>(0.0, 1.0),\n        vec2<f32>(0.0, 0.0),\n    );\n\n    var output : VertexOutput;\n    output.Position = vec4<f32>(positions[VertexIndex], 0.0, 1.0);\n    output.TexCoord = texCoords[VertexIndex];\n    return output;\n}\n\n@fragment\nfn frag_main(@location(0) TexCoord : vec2<f32>) -> @location(0) vec4<f32> {\n    return textureSample(color_buffer, screen_sampler, TexCoord);\n}"}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const t=n(419),e=n(147),r=document.getElementById("gfx-main");let a=window.innerWidth,i=window.innerHeight;r.width=a,r.height=i,r.style.left="0px",r.style.top="0px",r.style.position="absolute",window.onresize=function(){a=window.innerWidth,i=window.innerHeight,r.width=a,r.height=i,location.reload()};const o=Math.floor(1/(a*i)*1e9*2),s=(document.getElementById("title"),document.getElementById("btn-toggle")),u=document.getElementById("btn-remove"),c=document.getElementById("btn-footer");s.addEventListener("click",(()=>{f.toggleCameraMovement()})),u.addEventListener("click",(()=>{f.toggleStars(o)})),c.addEventListener("click",(()=>{f.changing_scroll=!0,setTimeout((()=>{window.location.href="/about.html"}),2e3)}));const h=new e.Scene(4,o),f=new t.Renderer(r,h);f.Initialize()})()})();